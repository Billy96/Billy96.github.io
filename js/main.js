(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

/* eslint-disable node/no-unsupported-features/node-builtins */
(function ($, moment, ClipboardJS, config) {
  $('.article img:not(".not-gallery-item")').each(function () {
    // wrap images with link and add caption if possible
    if ($(this).parent('a').length === 0) {
      $(this).wrap('<a class="gallery-item" href="' + $(this).attr('src') + '"></a>');

      if (this.alt) {
        $(this).after('<p class="has-text-centered is-size-6 caption">' + this.alt + '</p>');
      }
    }
  });

  if (typeof $.fn.lightGallery === 'function') {
    $('.article').lightGallery({
      selector: '.gallery-item'
    });
  }

  if (typeof $.fn.justifiedGallery === 'function') {
    if ($('.justified-gallery > p > .gallery-item').length) {
      $('.justified-gallery > p > .gallery-item').unwrap();
    }

    $('.justified-gallery').justifiedGallery();
  }

  if (typeof moment === 'function') {
    $('.article-meta time').each(function () {
      $(this).text(moment($(this).attr('datetime')).fromNow());
    });
  }

  $('.article > .content > table').each(function () {
    if ($(this).width() > $(this).parent().width()) {
      $(this).wrap('<div class="table-overflow"></div>');
    }
  });

  function adjustNavbar() {
    var navbarWidth = $('.navbar-main .navbar-start').outerWidth() + $('.navbar-main .navbar-end').outerWidth();

    if ($(document).outerWidth() < navbarWidth) {
      $('.navbar-main .navbar-menu').addClass('justify-content-start');
    } else {
      $('.navbar-main .navbar-menu').removeClass('justify-content-start');
    }
  }

  adjustNavbar();
  $(window).resize(adjustNavbar);

  function toggleFold(codeBlock, isFolded) {
    var $toggle = $(codeBlock).find('.fold i');
    !isFolded ? $(codeBlock).removeClass('folded') : $(codeBlock).addClass('folded');
    !isFolded ? $toggle.removeClass('fa-angle-right') : $toggle.removeClass('fa-angle-down');
    !isFolded ? $toggle.addClass('fa-angle-down') : $toggle.addClass('fa-angle-right');
  }

  function createFoldButton(fold) {
    return '<span class="fold">' + (fold === 'unfolded' ? '<i class="fas fa-angle-down"></i>' : '<i class="fas fa-angle-right"></i>') + '</span>';
  }

  $('figure.highlight table').wrap('<div class="highlight-body">');

  if (typeof config !== 'undefined' && typeof config.article !== 'undefined' && typeof config.article.highlight !== 'undefined') {
    $('figure.highlight').addClass('hljs');
    $('figure.highlight .code .line span').each(function () {
      var classes = $(this).attr('class').split(/\s+/);

      if (classes.length === 1) {
        $(this).addClass('hljs-' + classes[0]);
        $(this).removeClass(classes[0]);
      }
    });
    var clipboard = config.article.highlight.clipboard;
    var fold = config.article.highlight.fold.trim();
    $('figure.highlight').each(function () {
      if ($(this).find('figcaption').length) {
        $(this).find('figcaption').addClass('level is-mobile');
        $(this).find('figcaption').append('<div class="level-left">');
        $(this).find('figcaption').append('<div class="level-right">');
        $(this).find('figcaption div.level-left').append($(this).find('figcaption').find('span'));
        $(this).find('figcaption div.level-right').append($(this).find('figcaption').find('a'));
      } else {
        if (clipboard || fold) {
          $(this).prepend('<figcaption class="level is-mobile"><div class="level-left"></div><div class="level-right"></div></figcaption>');
        }
      }
    });

    if (typeof ClipboardJS !== 'undefined' && clipboard) {
      $('figure.highlight').each(function () {
        var id = 'code-' + Date.now() + (Math.random() * 1000 | 0);
        var button = '<a href="javascript:;" class="copy" title="Copy" data-clipboard-target="#' + id + ' .code"><i class="fas fa-copy"></i></a>';
        $(this).attr('id', id);
        $(this).find('figcaption div.level-right').append(button);
      });
      new ClipboardJS('.highlight .copy'); // eslint-disable-line no-new
    }

    if (fold) {
      $('figure.highlight').each(function () {
        if ($(this).find('figcaption').find('span').length > 0) {
          var span = $(this).find('figcaption').find('span');

          if (span[0].innerText.indexOf('>folded') > -1) {
            span[0].innerText = span[0].innerText.replace('>folded', '');
            $(this).find('figcaption div.level-left').prepend(createFoldButton('folded'));
            toggleFold(this, true);
            return;
          }
        }

        $(this).find('figcaption div.level-left').prepend(createFoldButton(fold));
        toggleFold(this, fold === 'folded');
      });
      $('figure.highlight figcaption .fold').click(function () {
        var $code = $(this).closest('figure.highlight');
        toggleFold($code.eq(0), !$code.hasClass('folded'));
      });
    }
  }

  var $toc = $('#toc');

  if ($toc.length > 0) {
    var toggleToc = function toggleToc() {
      // eslint-disable-line no-inner-declarations
      $toc.toggleClass('is-active');
      $mask.toggleClass('is-active');
    };

    var $mask = $('<div>');
    $mask.attr('id', 'toc-mask');
    $('body').append($mask);
    $toc.on('click', toggleToc);
    $mask.on('click', toggleToc);
    $('.navbar-main .catalogue').on('click', toggleToc);
  }
})(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaGV4by10aGVtZS1pY2FydXMvc291cmNlL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0FBQ0MsV0FBUyxDQUFULEVBQVksTUFBWixFQUFvQixXQUFwQixFQUFpQyxNQUFqQyxFQUF5QztBQUN0QyxFQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDLElBQTNDLENBQWdELFlBQVc7QUFDdkQ7QUFDQSxRQUFJLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUSxNQUFSLENBQWUsR0FBZixFQUFvQixNQUFwQixLQUErQixDQUFuQyxFQUFzQztBQUNsQyxNQUFBLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUSxJQUFSLENBQWEsbUNBQW1DLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUSxJQUFSLENBQWEsS0FBYixDQUFuQyxHQUF5RCxRQUF0RTs7QUFDQSxVQUFJLEtBQUssR0FBVCxFQUFjO0FBQ1YsUUFBQSxDQUFDLENBQUMsSUFBRCxDQUFELENBQVEsS0FBUixDQUFjLG9EQUFvRCxLQUFLLEdBQXpELEdBQStELE1BQTdFO0FBQ0g7QUFDSjtBQUNKLEdBUkQ7O0FBVUEsTUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFGLENBQUssWUFBWixLQUE2QixVQUFqQyxFQUE2QztBQUN6QyxJQUFBLENBQUMsQ0FBQyxVQUFELENBQUQsQ0FBYyxZQUFkLENBQTJCO0FBQUUsTUFBQSxRQUFRLEVBQUU7QUFBWixLQUEzQjtBQUNIOztBQUNELE1BQUksT0FBTyxDQUFDLENBQUMsRUFBRixDQUFLLGdCQUFaLEtBQWlDLFVBQXJDLEVBQWlEO0FBQzdDLFFBQUksQ0FBQyxDQUFDLHdDQUFELENBQUQsQ0FBNEMsTUFBaEQsRUFBd0Q7QUFDcEQsTUFBQSxDQUFDLENBQUMsd0NBQUQsQ0FBRCxDQUE0QyxNQUE1QztBQUNIOztBQUNELElBQUEsQ0FBQyxDQUFD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SyxDQUFDLFdBQU4sQ0FBa0IsV0FBbEI7QUFDSCxLQVRnQjs7QUFDakIsUUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLE9BQUQsQ0FBZjtBQUNBLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxJQUFYLEVBQWlCLFVBQWpCO0FBRUEsSUFBQSxDQUFDLENBQUMsTUFBRCxDQUFELENBQVUsTUFBVixDQUFpQixLQUFqQjtBQU9BLElBQUEsSUFBSSxDQUFDLEVBQUwsQ0FBUSxPQUFSLEVBQWlCLFNBQWpCO0FBQ0EsSUFBQSxLQUFLLENBQUMsRUFBTixDQUFTLE9BQVQsRUFBa0IsU0FBbEI7QUFDQSxJQUFBLENBQUMsQ0FBQyx5QkFBRCxDQUFELENBQTZCLEVBQTdCLENBQWdDLE9BQWhDLEVBQXlDLFNBQXpDO0FBQ0g7QUFDSixDQXZJQSxFQXVJQyxNQXZJRCxFQXVJUyxNQUFNLENBQUMsTUF2SWhCLEVBdUl3QixNQUFNLENBQUMsV0F2SS9CLEVBdUk0QyxNQUFNLENBQUMsbUJBdkluRCxDQUFEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby11bnN1cHBvcnRlZC1mZWF0dXJlcy9ub2RlLWJ1aWx0aW5zICovXG4oZnVuY3Rpb24oJCwgbW9tZW50LCBDbGlwYm9hcmRKUywgY29uZmlnKSB7XG4gICAgJCgnLmFydGljbGUgaW1nOm5vdChcIi5ub3QtZ2FsbGVyeS1pdGVtXCIpJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gd3JhcCBpbWFnZXMgd2l0aCBsaW5rIGFuZCBhZGQgY2FwdGlvbiBpZiBwb3NzaWJsZVxuICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnQoJ2EnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICQodGhpcykud3JhcCgnPGEgY2xhc3M9XCJnYWxsZXJ5LWl0ZW1cIiBocmVmPVwiJyArICQodGhpcykuYXR0cignc3JjJykgKyAnXCI+PC9hPicpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWx0KSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZnRlcignPHAgY2xhc3M9XCJoYXMtdGV4dC1jZW50ZXJlZCBpcy1zaXplLTYgY2FwdGlvblwiPicgKyB0aGlzLmFsdCArICc8L3A+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgJC5mbi5saWdodEdhbGxlcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgJCgnLmFydGljbGUnKS5saWdodEdhbGxlcnkoeyBzZWxlY3RvcjogJy5nYWxsZXJ5LWl0ZW0nIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mICQuZm4uanVzdGlmaWVkR2FsbGVyeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoJCgnLmp1c3RpZmllZC1nYWxsZXJ5ID4gcCA+IC5nYWxsZXJ5LWl0ZW0nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICQoJy5qdXN0aWZpZWQtZ2FsbGVyeSA+IHAgPiAuZ2FsbGVyeS1pdGVtJykudW53cmFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLmp1c3RpZmllZC1nYWxsZXJ5JykuanVzdGlmaWVkR2FsbGVyeSgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbW9tZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICQoJy5hcnRpY2xlLW1ldGEgdGltZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnRleHQobW9tZW50KCQodGhpcykuYXR0cignZGF0ZXRpbWUnKSkuZnJvbU5vdygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCgnLmFydGljbGUgPiAuY29udGVudCA+IHRhYmxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykud2lkdGgoKSA+ICQodGhpcykucGFyZW50KCkud2lkdGgoKSkge1xuICAgICAgICAgICAgJCh0aGlzKS53cmFwKCc8ZGl2IGNsYXNzPVwidGFibGUtb3ZlcmZsb3dcIj48L2Rpdj4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYWRqdXN0TmF2YmFyKCkge1xuICAgICAgICBjb25zdCBuYXZiYXJXaWR0aCA9ICQoJy5uYXZiYXItbWFpbiAubmF2YmFyLXN0YXJ0Jykub3V0ZXJXaWR0aCgpICsgJCgnLm5hdmJhci1tYWluIC5uYXZiYXItZW5kJykub3V0ZXJXaWR0aCgpO1xuICAgICAgICBpZiAoJChkb2N1bWVudCkub3V0ZXJXaWR0aCgpIDwgbmF2YmFyV2lkdGgpIHtcbiAgICAgICAgICAgICQoJy5uYXZiYXItbWFpbiAubmF2YmFyLW1lbnUnKS5hZGRDbGFzcygnanVzdGlmeS1jb250ZW50LXN0YXJ0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcubmF2YmFyLW1haW4gLm5hdmJhci1tZW51JykucmVtb3ZlQ2xhc3MoJ2p1c3RpZnktY29udGVudC1zdGFydCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkanVzdE5hdmJhcigpO1xuICAgICQod2luZG93KS5yZXNpemUoYWRqdXN0TmF2YmFyKTtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUZvbGQoY29kZUJsb2NrLCBpc0ZvbGRlZCkge1xuICAgICAgICBjb25zdCAkdG9nZ2xlID0gJChjb2RlQmxvY2spLmZpbmQoJy5mb2xkIGknKTtcbiAgICAgICAgIWlzRm9sZGVkID8gJChjb2RlQmxvY2spLnJlbW92ZUNsYXNzKCdmb2xkZWQnKSA6ICQoY29kZUJsb2NrKS5hZGRDbGFzcygnZm9sZGVkJyk7XG4gICAgICAgICFpc0ZvbGRlZCA/ICR0b2dnbGUucmVtb3ZlQ2xhc3MoJ2ZhLWFuZ2xlLXJpZ2h0JykgOiAkdG9nZ2xlLnJlbW92ZUNsYXNzKCdmYS1hbmdsZS1kb3duJyk7XG4gICAgICAgICFpc0ZvbGRlZCA/ICR0b2dnbGUuYWRkQ2xhc3MoJ2ZhLWFuZ2xlLWRvd24nKSA6ICR0b2dnbGUuYWRkQ2xhc3MoJ2ZhLWFuZ2xlLXJpZ2h0Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRm9sZEJ1dHRvbihmb2xkKSB7XG4gICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCJmb2xkXCI+JyArIChmb2xkID09PSAndW5mb2xkZWQnID8gJzxpIGNsYXNzPVwiZmFzIGZhLWFuZ2xlLWRvd25cIj48L2k+JyA6ICc8aSBjbGFzcz1cImZhcyBmYS1hbmdsZS1yaWdodFwiPjwvaT4nKSArICc8L3NwYW4+JztcbiAgICB9XG5cbiAgICAkKCdmaWd1cmUuaGlnaGxpZ2h0IHRhYmxlJykud3JhcCgnPGRpdiBjbGFzcz1cImhpZ2hsaWdodC1ib2R5XCI+Jyk7XG4gICAgaWYgKHR5cGVvZiBjb25maWcgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICYmIHR5cGVvZiBjb25maWcuYXJ0aWNsZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgJiYgdHlwZW9mIGNvbmZpZy5hcnRpY2xlLmhpZ2hsaWdodCAhPT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgICAkKCdmaWd1cmUuaGlnaGxpZ2h0JykuYWRkQ2xhc3MoJ2hsanMnKTtcbiAgICAgICAgJCgnZmlndXJlLmhpZ2hsaWdodCAuY29kZSAubGluZSBzcGFuJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSAkKHRoaXMpLmF0dHIoJ2NsYXNzJykuc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgIGlmIChjbGFzc2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hsanMtJyArIGNsYXNzZXNbMF0pO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoY2xhc3Nlc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgY29uc3QgY2xpcGJvYXJkID0gY29uZmlnLmFydGljbGUuaGlnaGxpZ2h0LmNsaXBib2FyZDtcbiAgICAgICAgY29uc3QgZm9sZCA9IGNvbmZpZy5hcnRpY2xlLmhpZ2hsaWdodC5mb2xkLnRyaW0oKTtcblxuICAgICAgICAkKCdmaWd1cmUuaGlnaGxpZ2h0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24nKS5hZGRDbGFzcygnbGV2ZWwgaXMtbW9iaWxlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdmaWdjYXB0aW9uJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibGV2ZWwtbGVmdFwiPicpO1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnZmlnY2FwdGlvbicpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxldmVsLXJpZ2h0XCI+Jyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdmaWdjYXB0aW9uIGRpdi5sZXZlbC1sZWZ0JykuYXBwZW5kKCQodGhpcykuZmluZCgnZmlnY2FwdGlvbicpLmZpbmQoJ3NwYW4nKSk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdmaWdjYXB0aW9uIGRpdi5sZXZlbC1yaWdodCcpLmFwcGVuZCgkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24nKS5maW5kKCdhJykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xpcGJvYXJkIHx8IGZvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wcmVwZW5kKCc8ZmlnY2FwdGlvbiBjbGFzcz1cImxldmVsIGlzLW1vYmlsZVwiPjxkaXYgY2xhc3M9XCJsZXZlbC1sZWZ0XCI+PC9kaXY+PGRpdiBjbGFzcz1cImxldmVsLXJpZ2h0XCI+PC9kaXY+PC9maWdjYXB0aW9uPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBDbGlwYm9hcmRKUyAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xpcGJvYXJkKSB7XG4gICAgICAgICAgICAkKCdmaWd1cmUuaGlnaGxpZ2h0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9ICdjb2RlLScgKyBEYXRlLm5vdygpICsgKE1hdGgucmFuZG9tKCkgKiAxMDAwIHwgMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gJzxhIGhyZWY9XCJqYXZhc2NyaXB0OjtcIiBjbGFzcz1cImNvcHlcIiB0aXRsZT1cIkNvcHlcIiBkYXRhLWNsaXBib2FyZC10YXJnZXQ9XCIjJyArIGlkICsgJyAuY29kZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWNvcHlcIj48L2k+PC9hPic7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdpZCcsIGlkKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24gZGl2LmxldmVsLXJpZ2h0JykuYXBwZW5kKGJ1dHRvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ldyBDbGlwYm9hcmRKUygnLmhpZ2hsaWdodCAuY29weScpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvbGQpIHtcbiAgICAgICAgICAgICQoJ2ZpZ3VyZS5oaWdobGlnaHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24nKS5maW5kKCdzcGFuJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuID0gJCh0aGlzKS5maW5kKCdmaWdjYXB0aW9uJykuZmluZCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BhblswXS5pbm5lclRleHQuaW5kZXhPZignPmZvbGRlZCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5bMF0uaW5uZXJUZXh0ID0gc3BhblswXS5pbm5lclRleHQucmVwbGFjZSgnPmZvbGRlZCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnZmlnY2FwdGlvbiBkaXYubGV2ZWwtbGVmdCcpLnByZXBlbmQoY3JlYXRlRm9sZEJ1dHRvbignZm9sZGVkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlRm9sZCh0aGlzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ZpZ2NhcHRpb24gZGl2LmxldmVsLWxlZnQnKS5wcmVwZW5kKGNyZWF0ZUZvbGRCdXR0b24oZm9sZCkpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZUZvbGQodGhpcywgZm9sZCA9PT0gJ2ZvbGRlZCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJ2ZpZ3VyZS5oaWdobGlnaHQgZmlnY2FwdGlvbiAuZm9sZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRjb2RlID0gJCh0aGlzKS5jbG9zZXN0KCdmaWd1cmUuaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlRm9sZCgkY29kZS5lcSgwKSwgISRjb2RlLmhhc0NsYXNzKCdmb2xkZWQnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0ICR0b2MgPSAkKCcjdG9jJyk7XG4gICAgaWYgKCR0b2MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCAkbWFzayA9ICQoJzxkaXY+Jyk7XG4gICAgICAgICRtYXNrLmF0dHIoJ2lkJywgJ3RvYy1tYXNrJyk7XG5cbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkbWFzayk7XG5cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlVG9jKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWlubmVyLWRlY2xhcmF0aW9uc1xuICAgICAgICAgICAgJHRvYy50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkbWFzay50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkdG9jLm9uKCdjbGljaycsIHRvZ2dsZVRvYyk7XG4gICAgICAgICRtYXNrLm9uKCdjbGljaycsIHRvZ2dsZVRvYyk7XG4gICAgICAgICQoJy5uYXZiYXItbWFpbiAuY2F0YWxvZ3VlJykub24oJ2NsaWNrJywgdG9nZ2xlVG9jKTtcbiAgICB9XG59KGpRdWVyeSwgd2luZG93Lm1vbWVudCwgd2luZG93LkNsaXBib2FyZEpTLCB3aW5kb3cuSWNhcnVzVGhlbWVTZXR0aW5ncykpO1xuIl19
